
wp_estate_kind_of_map=parseInt(mapbase_vars.wp_estate_kind_of_map);var lealet_map_move_on_hover=0;var propertyMarker_submit="";var leaflet_map_move_flag=0;function wpresidence_map_general_start_map(b){var a;if(b=="prop"){a=parseInt(googlecode_property_vars.page_custom_zoom,10)}else{a=parseInt(googlecode_regular_vars.page_custom_zoom,10)}if(jQuery("#wpestate_full_map_control_data").length>0){a=jQuery("#wpestate_full_map_control_data").attr("data-zoom")}if(wp_estate_kind_of_map===1){wpresidence_google_start_map(a)}else{if(wp_estate_kind_of_map===2){wpresidence_leaflet_start_map(a)}}}function wpresidence_leaflet_start_map(b){if(typeof(curent_gview_long)==="undefined"||curent_gview_lat===""||curent_gview_long==="0"){if(typeof(googlecode_property_vars)!=="undefined"){curent_gview_lat=googlecode_property_vars.general_latitude}if(typeof(googlecode_regular_vars)!=="undefined"){curent_gview_lat=googlecode_regular_vars.general_latitude}}if(typeof(curent_gview_long)==="undefined"||curent_gview_long===""||curent_gview_long==="0"){if(typeof(googlecode_property_vars)!=="undefined"){curent_gview_long=googlecode_property_vars.general_longitude}if(typeof(googlecode_regular_vars)!=="undefined"){curent_gview_long=googlecode_regular_vars.general_longitude}}var a=L.latLng(curent_gview_lat,curent_gview_long);if(document.getElementById("googleMap")){map=L.map("googleMap",{center:a,zoom:b,}).on("load",function(c){jQuery("#gmap-loading").remove()})}else{if(document.getElementById("googleMapSlider")){map=L.map("googleMapSlider",{center:a,zoom:b}).on("load",function(c){jQuery("#gmap-loading").remove()})}else{return}}wpresidence_leaflet_initialize_map_common(map)}function wpresidence_leaflet_initialize_map_common(a){var b=wpresidence_open_stret_tile_details();a.addLayer(b);a.scrollWheelZoom.disable();if(Modernizr.mq("only all and (max-width: 768px)")){a.dragging.disable()}a.on("popupopen",function(d){lealet_map_move_on_hover=1;if(jQuery("#google_map_prop_list_wrapper").length==0){var c=a.project(d.popup._latlng);if(mapfunctions_vars.useprice==="yes"){c.y-=115}else{c.y-=320/2}a.panTo(a.unproject(c),{animate:true})}lealet_map_move_on_hover=1});jQuery("#gmap-loading").remove();a.on("load",function(c){jQuery("#gmap-loading").remove()});if(Modernizr.mq("only all and (max-width: 768px)")){a.on("dblclick ",function(c){if(a.dragging.enabled()){a.dragging.disable()}else{a.dragging.enable()}})}markers_cluster=L.markerClusterGroup({iconCreateFunction:function(c){return L.divIcon({html:'<div class="leaflet_cluster" style="background-image: url('+images.cloud_pin+')">'+c.getChildCount()+"</div>"})},})}function wpresidence_leaflet_map_cluster(){map.addLayer(markers_cluster)}function wprentals_map_general_map_pan_move(){if(wp_estate_kind_of_map===1){wprentals_google_map_pan_move()}else{if(wp_estate_kind_of_map===2){wprentals_leaflet_map_pan_move()}else{if(wp_estate_kind_of_map===3){}}}}function wpresidence_open_stret_tile_details(){if(mapbase_vars.wp_estate_mapbox_api_key===""){var a=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'})}else{var a=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token="+mapbase_vars.wp_estate_mapbox_api_key,{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,id:"mapbox.streets",accessToken:"your.mapbox.access.token"})}return a}function wpresidence_google_start_map(f){var c,e;if(jQuery("#googleMap").hasClass("full_height_map")){var b=jQuery(window).height()-jQuery(".master_header").height();jQuery("#googleMap,#gmap_wrapper").css("height",b)}if(typeof(curent_gview_long)==="undefined"||curent_gview_lat===""||curent_gview_lat==="0"){if(typeof(googlecode_property_vars)!=="undefined"){curent_gview_lat=googlecode_property_vars.general_latitude}if(typeof(googlecode_regular_vars)!=="undefined"){curent_gview_lat=googlecode_regular_vars.general_latitude}}if(typeof(curent_gview_long)==="undefined"||curent_gview_long===""||curent_gview_long==="0"){if(typeof(googlecode_property_vars)!=="undefined"){curent_gview_long=googlecode_property_vars.general_longitude}if(typeof(googlecode_regular_vars)!=="undefined"){curent_gview_long=googlecode_regular_vars.general_longitude}}if(typeof(googlecode_regular_vars)!=="undefined"){var d=googlecode_regular_vars.type.toLowerCase()}else{if(typeof(googlecode_property_vars)!=="undefined"){var d=googlecode_property_vars.type.toLowerCase()}}var a=0;var c={flat:false,noClear:false,zoom:parseInt(f),scrollwheel:false,draggable:true,center:new google.maps.LatLng(curent_gview_lat,curent_gview_long),mapTypeId:d,streetViewControl:false,disableDefaultUI:true,gestureHandling:"cooperative"};if(document.getElementById("googleMap")){map=new google.maps.Map(document.getElementById("googleMap"),c)}else{if(document.getElementById("googleMapSlider")){map=new google.maps.Map(document.getElementById("googleMapSlider"),c)}else{return}}google.maps.visualRefresh=true;if(mapfunctions_vars.show_g_search_status==="yes"){wpestate_set_google_search(map)}if(jQuery("#wpestate_full_map_control_data").length>0){var e=(jQuery("#wpestate_full_map_control_data").attr("data-map_style"));map.setOptions({styles:e})}var e="";if(mapfunctions_vars.map_style!==""){var e=JSON.parse(mapfunctions_vars.map_style)}if(jQuery("#wpestate_full_map_control_data").length>0){if(map_style_shortcode!==""){e=(map_style_shortcode)}}if(e!==""){map.setOptions({styles:e})}google.maps.event.addListener(map,"tilesloaded",function(){jQuery("#gmap-loading").remove()})}function wpresidence_map_general_set_markers(b,c,a){wpresidence_google_setMarkers2(b,c,a)}function wpresidence_google_setMarkers2(A,z){var c;var w;var m=parseInt(jQuery("#gmap_wrapper").attr("data-post_id"));if(isNaN(m)){m=parseInt(jQuery("#googleMapSlider").attr("data-post_id"),10)}var d=parseInt(mapfunctions_vars.open_height,10);var k=parseInt(mapfunctions_vars.closed_height,10);var o=document.createElement("div");width_browser=jQuery(window).width();infobox_width=700;vertical_pan=-215;if(width_browser<900){infobox_width=500}if(width_browser<600){infobox_width=400}if(width_browser<400){infobox_width=200}if(wp_estate_kind_of_map===1){bounds=new google.maps.LatLngBounds()}for(var x=0;x<z.length;x++){var t=z[x];var s=t[10];var e=t[1];var C=t[2];var B=decodeURIComponent(t[0]);var h=t[8];var l=t[3];var r=decodeURIComponent(t[4]);var v=decodeURIComponent(t[5]);var j=decodeURIComponent(t[6]);var q=decodeURIComponent(t[7]);var g=decodeURIComponent(t[9]);var f=t[11];var y=t[12];var b=t[13];var p=t[14];var n=decodeURIComponent(t[15]);var u=decodeURIComponent(t[16]);var a=decodeURIComponent(t[17]);if(m===s){found_id=x}if(wp_estate_kind_of_map===1){wpestate_createMarker(a,p,x,s,e,C,h,B,l,r,v,j,q,g,y,b,f,n,u)}else{if(wp_estate_kind_of_map===2){wpresidence_createMarker_leaflet(a,p,x,s,e,C,h,B,l,r,v,j,q,g,y,b,f,n,u)}}}}function wpresidence_map_general_cluster(){if(wp_estate_kind_of_map===1){wpestate_map_cluster()}else{if(wp_estate_kind_of_map===2){wpresidence_leaflet_map_cluster()}}}function wpresidence_map_general_fit_to_bounds(a){if(wp_estate_kind_of_map===1){wpresidence_google_fit_to_bounds(a)}else{if(wp_estate_kind_of_map===2){wpresidence_leaflet_fit_to_bounds(a)}}}function wpresidence_map_panorama(){if(parseInt(mapbase_vars.wp_estate_kind_of_map)==2){return}var a=new google.maps.LatLng(curent_gview_lat,curent_gview_long);panorama=map.getStreetView();panorama.setPosition(a);heading=parseInt(googlecode_property_vars.camera_angle);panorama.setPov(({heading:heading,pitch:0}));google.maps.event.addListener(panorama,"closeclick",function(){jQuery("#gmap-next,#gmap-prev ,#geolocation-button,#gmapzoomminus,#gmapzoomplus").show();jQuery("#street-view").removeClass("mapcontrolon")})}function wpresidence_google_fit_to_bounds(a){if(document.getElementById("google_map_prop_list")){}else{if(document.getElementById("googleMap")){if(a===1){if(typeof(bounds)!=="undefined"&&!bounds.isEmpty()){wpestate_fit_bounds(bounds)}else{wpestate_fit_bounds_nolsit()}}}}}function wpresidence_map_general_spiderfy(){if(wp_estate_kind_of_map===1){if(!jQuery("body").hasClass("single-estate_property")){oms=new OverlappingMarkerSpiderfier(map,{markersWontMove:true,markersWontHide:true,keepSpiderfied:true,legWeight:2});wpestate_setOms(gmarkers)}}else{if(wp_estate_kind_of_map===2){}}}function wpresidence_leaflet_fit_to_bounds(a){if(a===1){if(bounds_list.isValid()){if(mapfunctions_vars.bypass_fit_bounds!=="1"){wpestate_fit_bounds_leaflet(bounds_list)}}else{wpestate_fit_bounds_nolsit_leaflet()}}}function wpestate_fit_bounds_leaflet(b){is_fit_bounds_zoom=1;if(placeCircle!=""){map.fitBounds(placeCircle.getBounds())}else{if(gmarkers.length===1){var a=gmarkers[0].getLatLng();map.panTo(a);map.setZoom(10);is_fit_bounds_zoom=0}else{map.fitBounds(b);is_fit_bounds_zoom=0}}}function wprentals_leaflet_map_pan_move(){if(googlecode_regular_vars.on_demand_pins==="yes"&&mapfunctions_vars.is_tax!=1&&mapfunctions_vars.is_property_list==="1"){map.on("moveend",function(a){wpestate_ondenamd_map_moved_leaflet()})}}function wprentals_google_map_pan_move(){if(googlecode_regular_vars.on_demand_pins==="yes"&&mapfunctions_vars.is_tax!=1&&mapfunctions_vars.is_property_list==="1"){map.addListener("idle",function(){wpestate_ondenamd_map_moved()})}}function wpresidence_createMarker_leaflet(N,k,R,H,F,w,B,C,f,g,D,A,m,j,J,t,h,u,z){var y=document.createElement("div");y.className="leafinfobox-wrapper";var M="";var s=0;var v=" price_infobox ";var K=D;var p=parseFloat(wpestate_getCookie_map("my_custom_curr_pos"));if(!isNaN(p)&&p!==-1){var n=wpestate_get_price_currency(h,h);var x=D.match("</span>(.*)<span class=");if(x!==null){K=D.replace(x[1],n)}}if(mapfunctions_vars.useprice==="yes"){v=" openstreet_map_price_infobox "}var d="";if(g===""){d='<img width="400" height="161" src="'+mapfunctions_vars.path+'/idxdefault.jpg" class="attachment-property_map1 size-property_map1 wp-post-image" alt="">'}else{d=g}var l=decodeURIComponent(A.replace(/-/g," "));var e=decodeURIComponent(m.replace(/-/g," "));var Q=decodeURIComponent(u.replace(/-/g," "));var P=decodeURIComponent(z.replace(/-/g," "));var c=mapfunctions_vars.in_text;if(l===""||e===""){c=" "}c=" / ";var q,E;var r;if(t!=""){r='<span id="infobath">'+t+" "+mapfunctions_vars.ba+"</span>"}else{r=""}var E;if(J!=""){E='<span id="inforoom">'+J+" "+mapfunctions_vars.bd+"</span>"}else{E=""}var T;if(k!=""){T='<span id="infosize">'+k+"</span>"}else{T=""}var C=C.substr(0,30);if(C.length>30){C=C+"..."}M+=wpestate_generate_infobox_leaflet(v,C,j,d,D,h,T,r,E);var b={riseOnHover:true};var a=L.latLng(F,w);var I="";if(mapfunctions_vars.useprice==="yes"){var K=D;var p=parseFloat(wpestate_getCookie_map("my_custom_curr_pos"));if(!isNaN(p)&&p!==-1){var n=wpestate_get_price_currency(h,h);var x=D.match("</span>(.*)<span class=");if(x!==null){K=D.replace(x[1],n)}}var S="wpestate_marker openstreet_price_marker "+wpestate_makeSafeForCSS(u.trim())+" "+wpestate_makeSafeForCSS(z.trim());var O='<div class="'+S+'">';if(typeof(D)!=="undefined"){if(mapfunctions_vars.use_price_pins_full_price==="no"){O+='<div class="interior_pin_price">'+N+"</div>"}else{O+='<div class="interior_pin_price">'+K+"</div>"}}O+="</div>";var o=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:O});I=L.marker(a,{icon:o})}else{var G={iconUrl:wprentals_custompin_leaflet(B),iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]};b.icon=L.icon(G);I=L.marker(a,b)}I.idul=H;I.pin=B;if(mapfunctions_vars.user_cluster==="yes"){markers_cluster.addLayer(I)}else{I.addTo(map)}gmarkers.push(I);if(typeof(bounds_list)!=="undefined"){bounds_list.extend(I.getLatLng())}else{bounds_list=L.latLngBounds(I.getLatLng(),I.getLatLng())}y.innerHTML=M;I.bindPopup(M)}function wprentals_custompinchild_leaflet(b){var c;var d="";var a=jQuery(window).dense("devicePixelRatio");if(a>1){d="_2x"}if(images.userpin===""){c=mapfunctions_vars.path+"/userpin"+d+".png"}else{c=images.userpin;if(a>1){c=wpestate_get_custom_retina_pin(c)}}return c}function wprentals_custompin_leaflet(b){if(mapfunctions_vars.useprice==="yes"){return mapfunctions_vars.path+"/pixel.png"}var c="";var d="";var a=jQuery(window).dense("devicePixelRatio");if(a>1){d="_2x"}if(mapfunctions_vars.use_single_image_pin==="no"){if(b!==""){if(images[b]===""){c=mapfunctions_vars.path+"/"+b+d+".png"}else{c=images[b];if(a>1){c=wpestate_get_custom_retina_pin(c)}}}else{c=images.single_pin}}else{if(a>1){c=wpestate_get_custom_retina_pin(images.single_pin)}else{c=images.single_pin}}if(typeof(c)==="undefined"){c=images.single_pin}return c}function wprentals_map_resize(){if(wp_estate_kind_of_map===1){google.maps.event.trigger(map,"resize")}else{if(wp_estate_kind_of_map===2){map.invalidateSize()}else{if(wp_estate_kind_of_map===3){}}}}function wprentals_initialize_map_submit_leaflet(){var c=jQuery("#property_latitude").val();var d=jQuery("#property_longitude").val();if(c===""||c===0||c==="0"){c=google_map_submit_vars.general_latitude}if(d===""||d===0||d==="0"){d=google_map_submit_vars.general_longitude}var b=L.latLng(c,d);if(document.getElementById("googleMapsubmit")){map=L.map("googleMapsubmit",{center:b,zoom:17}).on("load",function(f){});map_intern=1;var e=wpresidence_open_stret_tile_details();map.addLayer(e);map.on("click",function(g){map.removeLayer(propertyMarker_submit);var f=L.latLng(g.latlng);propertyMarker_submit=L.marker(g.latlng).addTo(map);propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+g.latlng.lat+" Longitude: "+g.latlng.lng+"</div>").openPopup();jQuery("#property_latitude").val(g.latlng.lat);jQuery("#property_longitude").val(g.latlng.lng)});var a=L.latLng(c,d);propertyMarker_submit=L.marker(a).addTo(map);propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+c+" Longitude: "+d+"</div>");setTimeout(function(){propertyMarker_submit.openPopup()},600)}}function wpresidence_map_resise(){if(wp_estate_kind_of_map===1){google.maps.event.addListenerOnce(map,"idle",function(){setTimeout(function(){google.maps.event.trigger(map,"resize")},600)})}else{if(wp_estate_kind_of_map===2){map.invalidateSize();setTimeout(function(){map.invalidateSize()},600)}}}function wpresidence_initialize_map_contact_leaflet(){var d=L.latLng(mapbase_vars.hq_latitude,mapbase_vars.hq_longitude);map=L.map("googleMap",{center:d,zoom:parseInt(mapbase_vars.page_custom_zoom,10),});var e=wpresidence_open_stret_tile_details();map.addLayer(e);map.scrollWheelZoom.disable();if(Modernizr.mq("only all and (max-width: 768px)")){map.dragging.disable()}jQuery("#gmap-loading").remove();map.on("popupopen",function(h){var g=map.project(h.popup._latlng);if(mapfunctions_vars.useprice==="yes"){g.y-=115}else{g.y-=120/2}map.panTo(map.unproject(g),{animate:true})});var c=L.latLng(mapbase_vars.hq_latitude,mapbase_vars.hq_longitude);var b={iconUrl:images.single_pin,iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]};var a={riseOnHover:true};a.icon=L.icon(b);var f=L.marker(c,a);f.addTo(map);f.fire("click");if(Modernizr.mq("only all and (max-width: 768px)")){map.on("dblclick ",function(g){if(map.dragging.enabled()){map.dragging.disable()}else{map.dragging.enable()}})}}function wpresidence_initialize_map_contact(){if(!document.getElementById("googleMap")){return}var a={zoom:parseInt(mapbase_vars.page_custom_zoom),scrollwheel:false,center:new google.maps.LatLng(mapbase_vars.hq_latitude,mapbase_vars.hq_longitude),mapTypeId:mapbase_vars.type.toLowerCase(),streetViewControl:false,disableDefaultUI:true,gestureHandling:"cooperative"};map=new google.maps.Map(document.getElementById("googleMap"),a);google.maps.event.addListener(map,"tilesloaded",function(){jQuery("#gmap-loading").remove()});var b="";if(mapfunctions_vars.map_style!==""){b=JSON.parse(mapfunctions_vars.map_style)}if(jQuery("#wpestate_full_map_control_data").length>0){if(map_style_shortcode!==""){b=(map_style_shortcode)}if(mapfunctions_vars.shortcode_map_style!==""){}}map.setOptions({styles:b});pins=mapbase_vars.markers;markers=jQuery.parseJSON(pins);wpestate_setMarkers_contact(map,markers)}function wpestate_custompincontact(a){a={url:images.single_pin,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)};return a}function wpestate_setMarkers_contact(g,c){var d={coord:[1,1,1,38,38,59,59,1],type:"poly"};var h;var e=document.createElement("div");var b={content:e,disableAutoPan:true,maxWidth:500,pixelOffset:new google.maps.Size(-90,-210),zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",draggable:true,infoBoxClearance:new google.maps.Size(1,1),isHidden:false,pane:"floatPane",enableEventPropagation:false};infoBox=new InfoBox(b);var f=new google.maps.LatLng(mapbase_vars.hq_latitude,mapbase_vars.hq_longitude);var a=new google.maps.Marker({position:f,map:g,icon:wpestate_custompincontact(c[8]),shape:d,title:decodeURIComponent(c[0].replace(/\+/g," ")),zIndex:1,image:c[4],price:c[5],type:c[6],type2:c[7],infoWindowIndex:0});gmarkers.push(a)};