
var morgageChart;jQuery(document).ready(function(a){wpestate_enable_star_action();if(a(".venobox").length>0){a(".venobox").venobox()}jQuery("#edit_review").on("click",function(b){var h=jQuery(this).attr("data-listing_id");var i=jQuery(this).parent().find("#wpestate_review_title").val();var g=jQuery(this).parent().find("#wpestare_review_content").val();var c=jQuery(this).parent().find(".starselected_click").length;var e=control_vars.admin_url+"admin-ajax.php";var d=jQuery(this);var j=jQuery(this).parent().parent();var k=jQuery(this).attr("data-coment_id");if(c>0&&g!=""){jQuery(".rating").text(control_vars.posting)}var f=jQuery("#wpestate_review_nonce").val();jQuery.ajax({type:"POST",url:e,data:{action:"wpestate_edit_review",listing_id:h,title:i,stars:c,content:g,coment:k,security:f},success:function(l){jQuery(".rating").text(control_vars.review_edited)},error:function(l){}})});jQuery("#submit_review").on("click",function(b){var h=jQuery(this).attr("data-listing_id");var i=jQuery(this).parent().find("#wpestate_review_title").val();var g=jQuery(this).parent().find("#wpestare_review_content").val();var c=jQuery(this).parent().find(".starselected_click").length;var e=control_vars.admin_url+"admin-ajax.php";var d=jQuery(this);var j=jQuery(this).parent().parent();if(c>0&&g!=""){jQuery(".rating").text(control_vars.posting)}var f=jQuery("#wpestate_review_nonce").val();jQuery.ajax({type:"POST",url:e,data:{action:"wpestate_post_review",listing_id:h,title:i,stars:c,content:g,security:f,},success:function(k){jQuery(".rating").text(control_vars.review_posted);jQuery("#wpestate_review_title").val("");jQuery("#wpestare_review_content").val("")},error:function(k){}})})});function wpestate_enable_star_action(){jQuery(".empty_star").on({mouseenter:function(){var a,b;b=jQuery(".empty_star").index(this);jQuery(".empty_star").each(function(){a=jQuery(".empty_star").index(this);if(a<=b){jQuery(this).addClass("starselected")}else{jQuery(this).removeClass("starselected")}})},mouseleave:function(){}});jQuery(".rating").mouseleave(function(){jQuery(".empty_star").removeClass("starselected")});jQuery(".empty_star").on("click",function(c){jQuery(".empty_star").removeClass("starselected_click");var b=jQuery(".empty_star").index(this);var a="";jQuery(".empty_star").each(function(){a=jQuery(".empty_star").index(this);if(a<=b){jQuery(this).addClass("starselected_click")}})})}function wpestate_show_morg_pie(){if(!document.getElementById("morgage_chart")){return}var a={datasets:[{data:[jQuery("#morg_principal").attr("data-per"),jQuery("#monthly_property_tax").attr("data-per"),jQuery("#hoo_fees").attr("data-per")],backgroundColor:["#0073e1","#0dc3f8","#FF5E5B",]}],labels:[wpestate_property_vars.label_principal,wpestate_property_vars.label_property_tax,wpestate_property_vars.label_hoo,]};var c="";var b=jQuery("#morgage_chart").get(0).getContext("2d");morgageChart=new Chart(b,{type:"doughnut",data:a,options:{responsive:true,cutoutPercentage:70,layout:{padding:{left:50,right:0,top:0,bottom:0}},title:{display:false,},animation:{animateScale:true,animateRotate:true},tooltips:{enabled:false},legend:{display:false,}}});jQuery("#morgage_down_payment").on("change",function(){var f=parseFloat(jQuery("#morgage_down_payment").val(),10);var e=parseFloat(jQuery("#morgage_home_price").val(),10);var d=parseFloat(f*100/e,10);jQuery("#morgage_down_payment_percent").val(d.toFixed(2));wpestate_compute_morg()});jQuery("#morgage_down_payment_percent").on("change",function(){var e=parseFloat(jQuery("#morgage_home_price").val(),10);var d=parseFloat(jQuery("#morgage_down_payment_percent").val(),10);var f=parseFloat(e*d/100);jQuery("#morgage_down_payment").val(f.toFixed(2));wpestate_compute_morg()});jQuery("#monthly_property_tax,#hoo_fees").on("change",function(){var e=parseFloat(jQuery("#hoo_fees").val(),10);var f=parseFloat(jQuery("#monthly_property_tax").val(),10);var g=parseFloat(jQuery("#morg_principal").text(),10);var d=g+e+f;jQuery("#morg_month_total").text(d.toFixed(2))});jQuery("#morgage_home_price,#morgage_term,#morgage_interest,#monthly_property_tax,#hoo_fees").on("change",function(){wpestate_compute_morg()})}function wpestate_compute_morg(){var d=parseFloat(jQuery("#morgage_home_price").val(),10);if(isNaN(d)){d=0}var f=parseFloat(jQuery("#morgage_down_payment").val(),10);if(isNaN(f)){f=0}var g=parseFloat(jQuery("#morgage_term").val(),10);if(isNaN(g)){g=1}var c=parseFloat(jQuery("#morgage_interest").val(),10);if(isNaN(c)){c=0}var i=parseFloat(jQuery("#hoo_fees").val(),10);if(isNaN(i)){i=0}var l=parseFloat(jQuery("#monthly_property_tax").val(),10);if(isNaN(l)){l=0}var a=parseFloat(f*100/d,10);if(isNaN(a)){a=0}jQuery("#morgage_down_payment_percent").val(a.toFixed(2));var m=d-f;var j=parseFloat((c/100/12)*m,10);var h=parseFloat(1+(c/100/12),10);var e=parseFloat(j/(1-(Math.pow(h,(-1*g*12)))),10);if(c==0){e=parseFloat(m/(g*12),10)}var n=e+i+l;if(d===0){n=0;e=0}jQuery("#morg_principal").text(e.toFixed(2));jQuery("#morg_month_total").text(n.toFixed(2));var o=parseFloat(e*100/n,10);var b=parseFloat(i*100/n,10);var k=parseFloat(l*100/n,10);morgageChart.data.datasets[0].data=[o,k,b];morgageChart.update()}function wpestate_show_stat_accordion(){if(!document.getElementById("myChart")){return}var b=jQuery("#myChart").get(0).getContext("2d");var c=new Chart(b);var g="";var f="  ";g=jQuery.parseJSON(wpestate_property_vars.singular_label);f=jQuery.parseJSON(wpestate_property_vars.singular_values);var e={labels:g,datasets:[{label:wpestate_property_vars.property_views,fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:f},]};var d={title:"page views",scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};var a=new Chart(b,{type:"bar",data:e,options:d})};